<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Uroflowmeter: src/LoadCell.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Uroflowmeter
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">LoadCell.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="LoadCell_8h_source.html">LoadCell.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6000449864691a5e74750bda0537e8da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoadCell_8cpp.html#a6000449864691a5e74750bda0537e8da">scale_setup</a> ()</td></tr>
<tr class="memdesc:a6000449864691a5e74750bda0537e8da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the load cell sensor and configures it for operation.  <a href="LoadCell_8cpp.html#a6000449864691a5e74750bda0537e8da">More...</a><br /></td></tr>
<tr class="separator:a6000449864691a5e74750bda0537e8da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbdb233f6c0146ec3b54681143f4082c"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoadCell_8cpp.html#adbdb233f6c0146ec3b54681143f4082c">get_scale_weight</a> ()</td></tr>
<tr class="memdesc:adbdb233f6c0146ec3b54681143f4082c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the current weight from the load cell.  <a href="LoadCell_8cpp.html#adbdb233f6c0146ec3b54681143f4082c">More...</a><br /></td></tr>
<tr class="separator:adbdb233f6c0146ec3b54681143f4082c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cdd9456365d866e45a498b31d84c2cb"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoadCell_8cpp.html#a3cdd9456365d866e45a498b31d84c2cb">get_flow_rate</a> ()</td></tr>
<tr class="memdesc:a3cdd9456365d866e45a498b31d84c2cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the current flow rate based on the weight change over time.  <a href="LoadCell_8cpp.html#a3cdd9456365d866e45a498b31d84c2cb">More...</a><br /></td></tr>
<tr class="separator:a3cdd9456365d866e45a498b31d84c2cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7152bd2edbcf11ba2710a956f1481f27"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structFlowRateResult.html">FlowRateResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoadCell_8cpp.html#a7152bd2edbcf11ba2710a956f1481f27">get_flow_info</a> ()</td></tr>
<tr class="memdesc:a7152bd2edbcf11ba2710a956f1481f27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the flow rate and volume based on the current and previous weight measurements.  <a href="LoadCell_8cpp.html#a7152bd2edbcf11ba2710a956f1481f27">More...</a><br /></td></tr>
<tr class="separator:a7152bd2edbcf11ba2710a956f1481f27"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a7152bd2edbcf11ba2710a956f1481f27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7152bd2edbcf11ba2710a956f1481f27">&#9670;&nbsp;</a></span>get_flow_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structFlowRateResult.html">FlowRateResult</a> get_flow_info </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the flow rate and volume based on the current and previous weight measurements. </p>
<p>Calculates and returns flow rate and volume information.</p>
<p>This function calculates the flow rate using the weight difference and the elapsed time since the last measurement. It also calculates the total volume based on the current weight. The calculation assumes a specific gravity of the liquid to convert weight to volume.</p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structFlowRateResult.html" title="Struct to hold the flow rate and volume results.">FlowRateResult</a> A struct containing the calculated flow rate and volume. </dd></dl>

</div>
</div>
<a id="a3cdd9456365d866e45a498b31d84c2cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cdd9456365d866e45a498b31d84c2cb">&#9670;&nbsp;</a></span>get_flow_rate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float get_flow_rate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the current flow rate based on the weight change over time. </p>
<p>Calculates and returns the current flow rate.</p>
<p>This function uses the difference in weight and time to calculate the flow rate.</p>
<dl class="section return"><dt>Returns</dt><dd>float The current flow rate. If the calculated flow rate is negative, 0.0 is returned. </dd></dl>

</div>
</div>
<a id="adbdb233f6c0146ec3b54681143f4082c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbdb233f6c0146ec3b54681143f4082c">&#9670;&nbsp;</a></span>get_scale_weight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float get_scale_weight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches the current weight from the load cell. </p>
<p>Returns the current weight measured by the scale.</p>
<p>This function reads multiple weight samples, filters them through a median filter, and returns the median as the current weight.</p>
<dl class="section return"><dt>Returns</dt><dd>float The current weight measured by the load cell. If the weight is negative, 0.0 is returned. </dd></dl>

</div>
</div>
<a id="a6000449864691a5e74750bda0537e8da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6000449864691a5e74750bda0537e8da">&#9670;&nbsp;</a></span>scale_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scale_setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the load cell sensor and configures it for operation. </p>
<p>Sets up the scale hardware and initializes communication.</p>
<p>This function starts the Wire library, sets the clock speed, and initializes the NAU7802 scale. It also sets the calibration factor and calibrates the Analog Front End (AFE) of the NAU7802. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
